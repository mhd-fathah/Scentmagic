<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Order Details</title>
  <!-- Bootstrap CSS -->
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css"
    rel="stylesheet"
  >
  <!-- Bootstrap Icons -->
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css"
    rel="stylesheet"
  >
  <link rel="stylesheet" href="/css/my account/order-details.css">
</head>
<body>
  <div class="container">
    <h1>Order Details</h1>

    <!-- Order Card -->
    <div class="order-card">
      <div class="order-header">
        <span>Order ID: #<%= order.id %></span>
        <span class="float-end">Date: <%= order.date %></span>
      </div>
      <div class="order-body">
        <div class="row">
          <div class="col-md-3">
            <img
              src="<%= order.image %>"
              alt="Product Image"
              class="img-fluid"
            >
          </div>
          <div class="col-md-9">
            <!-- Loop through items in the order -->
            <% order.items.forEach(item => { %>
              <div class="order-item">
                <div class="order-item-img">
                  <img
                    src="<%= item.image %>"
                    alt="Product Image"
                    class="img-fluid"
                  >
                </div>
                <div class="order-item-details">
                  <h5><%= item.name %></h5>
                  <p>Category: <%= item.category %></p>
                  <p>Quantity: <%= item.quantity %></p>
                  <p>Total Price: $<%= item.totalPrice %></p>
                </div>
              </div>
            <% }); %>

            <div class="order-info">
              <p>Order Status: <span class="<%= order.statusClass %>"><%= order.status %></span></p>
              <p>Payment Status: <span class="<%= order.paymentStatusClass %>"><%= order.paymentStatus %></span></p>
            </div>

            <div class="order-summary mt-4">
              <h5>Order Summary:</h5>
              <p>Total Items: <%= order.totalItems %></p>
              <p>Shipping Cost: $<%= order.shippingCost %></p>
              <p>Total: $<%= order.total %></p>
            </div>

            <div class="shipping-info mt-4">
              <h5>Shipping Information:</h5>
              <p>Name: <%= order.shipping.name %></p>
              <p>Address: <%= order.shipping.address %></p>
              <p>Phone: <%= order.shipping.phone %></p>
            </div>

            <div class="d-flex gap-2 mt-3">
              <a href="/orders/track/<%= order.id %>" class="btn btn-outline-magenta btn-sm">
                Track Order
              </a>
              <a href="/orders/invoice/<%= order.id %>" class="btn btn-outline-magenta btn-sm">
                Download Invoice
              </a>
              <% if (order.canCancel) { %>
                <a href="/orders/cancel/<%= order.id %>" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to cancel this order?');">
                  Cancel Order
                </a>
              <% } %>
            </div>
          </div>
        </div>
      </div>
      <div class="order-footer">
        <a href="/orders/view-orders">Back to Orders</a>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"
  ></script>
</body>
</html>
